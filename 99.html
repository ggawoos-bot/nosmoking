<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>금연클리닉 참여자 검색</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-100 p-4 sm:p-6 lg:p-8 flex flex-col items-center">
    <div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-4xl mb-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">보건소 월별 모니터링 집계결과_금연클리닉 검색조건 추가</h1>

        <!-- 필터 컨트롤 섹션 -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <!-- 과태료 감면자 필터 -->
            <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                <h2 class="text-lg font-semibold text-blue-800 mb-3">과태료 감면자</h2>
                <div class="flex flex-wrap gap-4">
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="fineExemption" value="any" checked
                               class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500 rounded-full">
                        <span class="ml-2 text-gray-700">상관 없음</span>
                    </label>
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="fineExemption" value="include"
                               class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500 rounded-full">
                        <span class="ml-2 text-gray-700">포함</span>
                    </label>
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="fineExemption" value="exclude"
                               class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500 rounded-full">
                        <span class="ml-2 text-gray-700">제외</span>
                    </label>
                </div>
            </div>

            <!-- 손목닥터 참여자 필터 -->
            <div class="p-4 bg-green-50 rounded-lg shadow-sm">
                <h2 class="text-lg font-semibold text-green-800 mb-3">손목닥터 참여자</h2>
                <div class="flex flex-wrap gap-4">
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="wristDoctor" value="any" checked
                               class="form-radio h-4 w-4 text-green-600 border-gray-300 focus:ring-green-500 rounded-full">
                        <span class="ml-2 text-gray-700">상관 없음</span>
                    </label>
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="wristDoctor" value="include"
                               class="form-radio h-4 w-4 text-green-600 border-gray-300 focus:ring-green-500 rounded-full">
                        <span class="ml-2 text-gray-700">포함</span>
                    </label>
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="wristDoctor" value="exclude"
                               class="form-radio h-4 w-4 text-green-600 border-gray-300 focus:ring-green-500 rounded-full">
                        <span class="ml-2 text-gray-700">제외</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- 검색 결과 섹션 -->
        <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">검색 결과</h2>
        <div id="participants-table-container" class="overflow-x-auto">
            <table class="min-w-full bg-white rounded-lg shadow-md">
                <thead class="bg-gray-200">
                    <tr>
                        <th class="py-3 px-4 text-left text-sm font-semibold text-gray-700 rounded-tl-lg">이름</th>
                        <th class="py-3 px-4 text-left text-sm font-semibold text-gray-700">과태료 감면자</th>
                        <th class="py-3 px-4 text-left text-sm font-semibold text-gray-700 rounded-tr-lg">손목닥터 참여자</th>
                    </tr>
                </thead>
                <tbody id="participants-table-body">
                    <!-- JavaScript will populate this -->
                </tbody>
            </table>
        </div>
        <p id="no-results-message" class="text-center text-gray-600 text-lg mt-8 hidden">검색 결과가 없습니다.</p>

        <!-- 설명 박스 섹션 -->
        <div class="mt-10 p-6 bg-gray-50 rounded-xl shadow-md border border-gray-200">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">검색 조건 설명</h2>
            <div class="text-gray-700 space-y-4">
                <p class="font-semibold">1. 개요</p>
                <ul class="list-disc list-inside ml-4 space-y-1">
                    <li>보건소 월별 모니터링 집계결과 화면에서 금연클리닉 검색조건 추가가 필요합니다.</li>
                    <li>조건값들 간에 상관 관계가 있어, 이에 대한 검토가 필요합니다.</li>
                    <li>이전 사이트의 구분 콤보박스에 "전체, 보건소금연클리닉, 과태료 감면, 손목닥터9988"이 있었는데, 이에 대한 의미 파악이나 상관성이 애매하여 명확하게 정의하는 게 필요합니다.</li>
                </ul>

                <p class="font-semibold">2. 종류</p>
                <ul class="list-disc list-inside ml-4 space-y-1">
                    <li>금연클리닉 참여자이면서 과태료 감면자</li>
                    <li>금연클리닉 참여자이면서 손목닥터9988 참여자</li>
                    <li>금연클리닉 참여자이면서 손목닥터9988 참여자 + 과태료 감면자</li>
                    <li>금연클리닉 참여자이면서 과태료 감면자가 아님</li>
                    <li>금연클리닉 참여자이면서 손목닥터9988 참여자가 아님</li>
                    <li>금연클리닉 참여자이면서 과태료 감면자도 손목닥터9988 참여자도 아님</li>
                </ul>

                <p class="font-semibold">3. 검색 가능한 경우의 수</p>
                <ul class="list-disc list-inside ml-4 space-y-1">
                    <li>가. 금연클리닉 참여자 전체를 검색하고자 할 때</li>
                    <li>나. 이중 과태료 감면자는 제외하고 싶을 때</li>
                    <li>다. 과태료 감면자만 검색하고 싶을 때</li>
                    <li>라. 손목닥터참여자만 검색하고 싶을 때</li>
                    <li>마. 손목닥터 참여자는 제외하고 싶을 때 등</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // 임시 참여자 데이터
        const allParticipants = [
            { id: 1, name: '김철수', isFineExemption: false, isWristDoctor: false },
            { id: 2, name: '이영희', isFineExemption: true, isWristDoctor: false },
            { id: 3, name: '박민수', isFineExemption: false, isWristDoctor: true },
            { id: 4, name: '최지영', isFineExemption: true, isWristDoctor: true },
            { id: 5, name: '정대현', isFineExemption: false, isWristDoctor: false },
            { id: 6, name: '한아름', isFineExemption: true, isWristDoctor: false },
            { id: 7, name: '신동엽', isFineExemption: false, isWristDoctor: true },
            { id: 8, name: '강수진', isFineExemption: true, isWristDoctor: true },
            { id: 9, name: '윤미래', isFineExemption: false, isWristDoctor: false },
            { id: 10, name: '서준호', isFineExemption: true, isWristDoctor: false },
        ];

        // DOM 요소 참조
        const fineExemptionRadios = document.querySelectorAll('input[name="fineExemption"]');
        const wristDoctorRadios = document.querySelectorAll('input[name="wristDoctor"]');
        const participantsTableBody = document.getElementById('participants-table-body');
        const noResultsMessage = document.getElementById('no-results-message');
        const participantsTableContainer = document.getElementById('participants-table-container');

        /**
         * 현재 선택된 필터 값을 가져옵니다.
         * @param {string} name - 라디오 버튼 그룹의 이름 (e.g., 'fineExemption')
         * @returns {string} 선택된 값 ('any', 'include', 'exclude')
         */
        function getSelectedFilter(name) {
            const radios = document.querySelectorAll(`input[name="${name}"]:checked`);
            return radios.length > 0 ? radios[0].value : 'any';
        }

        /**
         * 필터링 로직을 적용하고 테이블을 업데이트합니다.
         */
        function applyFilters() {
            const fineExemptionFilter = getSelectedFilter('fineExemption');
            const wristDoctorFilter = getSelectedFilter('wristDoctor');

            const filteredParticipants = allParticipants.filter(participant => {
                // 과태료 감면자 필터 적용
                if (fineExemptionFilter === 'include' && !participant.isFineExemption) {
                    return false;
                }
                if (fineExemptionFilter === 'exclude' && participant.isFineExemption) {
                    return false;
                }

                // 손목닥터 참여자 필터 적용
                if (wristDoctorFilter === 'include' && !participant.isWristDoctor) {
                    return false;
                }
                if (wristDoctorFilter === 'exclude' && participant.isWristDoctor) {
                    return false;
                }

                return true; // 모든 필터를 통과한 경우
            });

            // 테이블 내용 초기화
            participantsTableBody.innerHTML = '';

            // 필터링된 참여자 목록을 테이블에 추가
            if (filteredParticipants.length > 0) {
                filteredParticipants.forEach(participant => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-200 last:border-b-0 hover:bg-gray-50';

                    const nameCell = document.createElement('td');
                    nameCell.className = 'py-3 px-4 text-gray-800';
                    nameCell.textContent = participant.name;
                    row.appendChild(nameCell);

                    const fineExemptionCell = document.createElement('td');
                    fineExemptionCell.className = 'py-3 px-4 text-gray-800';
                    fineExemptionCell.innerHTML = participant.isFineExemption ?
                        '<span class="inline-block bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full">예</span>' :
                        '<span class="inline-block bg-gray-100 text-gray-600 text-xs font-medium px-2.5 py-0.5 rounded-full">아니오</span>';
                    row.appendChild(fineExemptionCell);

                    const wristDoctorCell = document.createElement('td');
                    wristDoctorCell.className = 'py-3 px-4 text-gray-800';
                    wristDoctorCell.innerHTML = participant.isWristDoctor ?
                        '<span class="inline-block bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">예</span>' :
                        '<span class="inline-block bg-gray-100 text-gray-600 text-xs font-medium px-2.5 py-0.5 rounded-full">아니오</span>';
                    row.appendChild(wristDoctorCell);

                    participantsTableBody.appendChild(row);
                });
                participantsTableContainer.classList.remove('hidden');
                noResultsMessage.classList.add('hidden');
            } else {
                participantsTableContainer.classList.add('hidden');
                noResultsMessage.classList.remove('hidden');
            }
        }

        // 라디오 버튼에 이벤트 리스너 추가
        fineExemptionRadios.forEach(radio => {
            radio.addEventListener('change', applyFilters);
        });
        wristDoctorRadios.forEach(radio => {
            radio.addEventListener('change', applyFilters);
        });

        // 페이지 로드 시 초기 필터 적용
        document.addEventListener('DOMContentLoaded', applyFilters);
    </script>
</body>
</html>
